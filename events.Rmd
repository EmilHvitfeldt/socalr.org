---
title: "Southern California R Users"
output:
  distill::distill_article:
    includes:
      in_header: assets/header.html
      after_body: assets/_footer.html
    css: assets/styles.css
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

<div class="headers">
<h1>All Upcoming Events</h1>
</div>

```{r}
source(here::here("R", "packages.R"))
source(here::here("R", "functions.R"))

laocrugs <- read_csv(here::here("data", "laocrugs.csv"))
laocrugs <- slice_sample(laocrugs, n = nrow(laocrugs))

events_all <- read_csv(here::here("data", "events_all_socalr.csv"),
                       show_col_types = FALSE,
                       col_types = c("D", "c", "D", "t", 
                                     "c", "c", "c", "c")) %>% 
  filter(lubridate::year(local_date) >= 2022)

events <- events_all %>% filter(local_date >= Sys.Date())
past_events <- events_all %>% filter(local_date < Sys.Date())
```

```{r}
cards <- clean_events(events) %>% 
  pmap(as_card)
```

`r tagList(cards)`

<div class="headers">
<h1>Recent Events</h1>
</div>

```{r}
past_cards <- clean_events(past_events, descending = TRUE) %>% 
  pmap(as_card)
```

`r tagList(past_cards)`
